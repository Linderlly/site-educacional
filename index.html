<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz de Excel - InÃ­cio</title>
    <link rel="icon" href="./img/icon-excel.png" type="image/x-icon">
    <link rel="stylesheet" href="./CSS/stylepg.css">
</head>
<body>
    <div class="container">
        <button id="toggle-dark-mode" aria-label="Alternar modo escuro">ðŸŒ™</button>
        <h1>Bem-vindo ao Quiz de Excel</h1>
        <p>Insira seu nome para comeÃ§ar:</p>
        <input type="text" id="username" placeholder="Seu nome" aria-describedby="name-help">
        <p id="name-help" style="color: #e74c3c; display: none;">O nome deve ter pelo menos 3 caracteres e conter apenas letras e espaÃ§os.</p>
        <button onclick="startQuiz()">Iniciar</button>

        <button id="view-ranking-btn" style="margin-top: 20px;">Ver Ranking</button>

        <div id="ranking-popup" class="popup">
            <div class="popup-content">
                <span id="close-popup">&times;</span>
                <h2>Ranking dos Melhores</h2>
                <ol id="ranking-list"></ol>
            </div>
        </div>
    </div>

    <script>

    document.getElementById("view-ranking-btn").addEventListener("click", function() {
    displayRanking();
    const popup = document.getElementById("ranking-popup");
    popup.classList.add("active");
});


    document.getElementById("close-popup").addEventListener("click", function() {
    const popup = document.getElementById("ranking-popup");
    popup.classList.remove("active");
});

    window.addEventListener("click", function(event) {
    const popup = document.getElementById("ranking-popup");
    if (event.target === popup) {
        popup.classList.remove("active");
    }
});
        
        const isDarkMode = localStorage.getItem("darkMode") === "true";
        if (isDarkMode) {
            document.body.classList.add("dark-mode");
        }
        
        document.getElementById("toggle-dark-mode").addEventListener("click", function() {
            document.body.classList.toggle("dark-mode");
            const isDarkMode = document.body.classList.contains("dark-mode");
            localStorage.setItem("darkMode", isDarkMode); 
        });
 
        function displayRanking() {
            let ranking = JSON.parse(localStorage.getItem("ranking")) || [];
            let rankingList = document.getElementById("ranking-list");

            rankingList.innerHTML = ""; 

            ranking.forEach((player, index) => {
                let listItem = document.createElement("li");
                listItem.textContent = `${index + 1}. ${player.name} - ${player.score} pts`;
                rankingList.appendChild(listItem);
            });
        }
        document.getElementById("view-ranking-btn").addEventListener("click", function() {
            displayRanking(); 
            document.getElementById("ranking-popup").style.display = "block";
        });

        document.getElementById("close-popup").addEventListener("click", function() {
            document.getElementById("ranking-popup").style.display = "none";
        });
        window.addEventListener("click", function(event) {
            const popup = document.getElementById("ranking-popup");
            if (event.target === popup) {
                popup.style.display = "none";
            }
        });

        function startQuiz() {
            const name = document.getElementById("username").value.trim();
            const nameHelp = document.getElementById("name-help");

            if (name.length >= 3 && /^[a-zA-Z\s]+$/.test(name)) {
                localStorage.setItem("username", name);
                window.location.href = "./HTML/quiz.html";
            } else {
                nameHelp.style.display = "block";
            }
        }

        document.getElementById("username").addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                startQuiz();
            }
        });
    </script>
</body>
</html>